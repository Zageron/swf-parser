[
  {
    "input": {
      "buffer": "0b:(0-0000000)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 0,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-0000001)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 1,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-0000011)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 3,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-0000111)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 7,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-0001111)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 15,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-0011111)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 31,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-0111111)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 63,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(0-1111111)_00000000_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 127,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0000000)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 127,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0000001)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 255,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0000011)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 511,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0000111)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 1023,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0001111)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 2047,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0011111)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4095,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-0111111)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 8191,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_0-1111111)_00000000_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 16383,
      "stream": {
        "buffer": "0b00000000_00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0000000)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 16383,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0000001)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 32767,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0000011)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 65535,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0000111)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 131071,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0001111)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 262143,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0011111)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 524287,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-0111111)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 1048575,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_0-1111111)_00000000_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 2097151,
      "stream": {
        "buffer": "0b00000000_00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0000000)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 2097151,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0000001)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4194303,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0000011)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 8388607,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0000111)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 16777215,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0001111)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 33554431,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0011111)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 67108863,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-0111111)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 134217727,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_0-1111111)_00000000_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 268435455,
      "stream": {
        "buffer": "0b00000000_00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0000000)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 268435455,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0000001)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 536870911,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0000011)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 1073741823,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0000111)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 2147483647,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "comment": "Maximum value",
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0001111)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4294967295,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "comment": "Capped at maximum value",
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0011111)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4294967295,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "comment": "Capped at maximum value",
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-0111111)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4294967295,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "comment": "Capped at maximum value",
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_0-1111111)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4294967295,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  },
  {
    "comment": "Capped at maximum value (do not extend to 6th byte)",
    "input": {
      "buffer": "0b(1-1111111,_1-1111111,_1-1111111,_1-1111111_1-1111111)_00000000",
      "byte-pos": 0,
      "bit-pos": 0
    },
    "expected": {
      "result": 4294967295,
      "stream": {
        "buffer": "0b00000000",
        "byte-pos": 0,
        "bit-pos": 0
      }
    }
  }
]
